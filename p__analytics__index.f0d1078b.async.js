"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[519],{37432:function(t,e,n){n.d(e,{x:function(){return o}});var i=n(34713),a=n(58926),r=n(65334);function o(){var t=(0,i.Ge)().chainId;if(!t){var e=localStorage.getItem(r.HC);e&&((t=parseInt(e))||localStorage.removeItem(r.HC))}return t&&a.FQ.includes(t)||(t=a.rC),{chainId:t}}},89558:function(t,e,n){n.r(e),n.d(e,{default:function(){return Ne}});var i,a,r=n(27424),o=n.n(r),s=n(3410),l=n(50888),c=n(27484),u=n.n(c),d=n(62435),m=n(42122),v=n.n(m),x=n(74704),f=n.n(x),h=n(861),p=n.n(h),g=n(38416),y=n.n(g),j=n(43671),D=n(59508),b=n(46495),F=n(17283),k=n(25733),w=n(61029),P=n(58926),_=n(37432),I=(i={},y()(i,P.bx,"https://api.thegraph.com/subgraphs/name/dalveytech-adrew/fujibeta"),y()(i,P.qF,"https://api.thegraph.com/subgraphs/name/dalveytech-adrew/arbtest"),i),A=(a={},y()(a,P.bx,new k.r(P.LY[0])),y()(a,P.qF,new k.r(P.TB[0])),a);function C(t,e,n){for(var i=t.from,a=t.to,r=[],o=function(t,e){var n=[],i=new Date(t);for(;i<=e;)n.push(new Date(i)),i.setDate(i.getDate()+1);return n}(new Date(1e3*i),new Date(1e3*a)),s=0,l=function(){var t=u[c],i=e.find((function(e){return N(new Date(1e3*e.timestamp),t)}));i?r.push(i):r.push(n({timestamp:t.getTime()/1e3},r[s-1])),s++},c=0,u=o;c<u.length;c++)l();return r}function N(t,e){return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(e.subgraph,e.subgraphUrl,(0,_.x)()),i=n.chainId,a=(0,d.useState)(),r=o()(a,2),s=r[0],l=r[1],c=(0,d.useState)(!0),u=o()(c,2),m=u[0],v=u[1],x=(0,d.useState)(null),f=o()(x,2),h=f[0],p=f[1];return(0,d.useEffect)((function(){var e=new j.f({link:new D.u({uri:I[i],fetch:fetch}),cache:new b.h}),n=(0,F.Ps)(t);e.query({query:n}).then((function(t){l(t.data),v(!1)})).catch((function(t){p(t),v(!1)}))}),[t,i]),[s,m,h]}var L=function(t){var e=S('{\n    volumes(where: {period: daily, timestamp_gte: "'.concat(t.from,'", timestamp_lte:"').concat(t.to,'"}) {\n      timestamp\n      open\n      liquidation\n      id\n      market\n      close\n      cumulative\n    }\n    lpstats(where: {period: daily,  timestamp_gte: "').concat(t.from,'", timestamp_lte:"').concat(t.to,'" }) {\n      mint\n      burn\n      timestamp\n      period\n    }\n  }')),n=o()(e,3),i=n[0],a=n[1],r=n[2],s=["open","cumulative","liquidation","close"],l=0,c=[],u=((null==i?void 0:i.lpstats)||[]).map((function(t){var e=t.mint/1e6,n=t.burn/1e6;return v()(v()({},t),{},{buyAndSell:e+n,mint:e,burn:n})}));null!=i&&i.volumes&&(c=w.Z.chain((null==i?void 0:i.volumes)||[]).groupBy((function(t){return 86400*parseInt("".concat(t.timestamp/86400))})).map((function(t,e){var n=t.reduce((function(t,e){var n=U(s,e);return t.all+=n.cumulative,l+=n.cumulative,t.cumulative=l,t[e.market.toUpperCase()]=n.cumulative,t}),{all:0,cumulative:0,timestamp:Number(e)}),i=function(t){return(u||[]).findIndex((function(e){return N(new Date(1e3*e.timestamp),new Date(1e3*t))}))}(n.timestamp);if(i>=0){var a=u[i].buyAndSell;l+=a,n.all+=a,n.cumulative=l}return n})).value());var d=function(t,e){var n,i=[],a=p()(e),r=f()(t);try{for(r.s();!(n=r.n()).done;){for(var o=n.value,s=!1,l=0;l<a.length;l++){var c=a[l];c&&N(new Date(1e3*o.timestamp),new Date(1e3*c.timestamp))&&(i.push(v()(v()({},o),c)),s=!0,a[l]=void 0)}s||i.push(o)}}catch(t){r.e(t)}finally{r.f()}return i=i.concat(a.filter((function(t){return t}))),i}(u,c);return{data:C(t,d,(function(t,e){return v()(v()({},t),{},{all:0,mint:0,burn:0,buyAndSell:0,cumulative:e?e.cumulative:0})})),loading:a,error:r}};function U(t,e){var n=v()({},e);return t.forEach((function(t){n[t]=e[t]/1e18})),n}var K=n(30381),V=n.n(K),B=n(30286),T=(n(29079),n(77163),n(70763)),O=n(86074);function q(t){var e=t.options,n=t.startDate,i=t.endDate,a=t.onChange,r=(0,d.useState)(),s=o()(r,2),l=s[0],c=s[1],u=(0,d.useState)([{startDate:null,endDate:null,key:"selection"}]),m=o()(u,2),v=m[0],x=m[1];(0,d.useEffect)((function(){x([{startDate:n,endDate:i,key:"selection"}])}),[n,i]);var h=function(t){4==t.id&&a([null,null]);var e=new Date,n=V()().subtract(t.id,"month").toDate();c(t.id),4==t.id?a([null,null]):a([n,e])};(0,d.useEffect)((function(){var t,n=!1,i=f()(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.isDefault){n=!0,h(a);break}}}catch(t){i.e(t)}finally{i.f()}n||h(e[0])}),[]);var p=function(t){x([t.selection]),t.selection.startDate!=t.selection.endDate&&a([t.selection.startDate,t.selection.endDate])};return(0,O.jsx)("div",{className:"date-range-selector-wrapper",children:(0,O.jsx)(T.ZP,{placeholder:"Select",multi:!0,contentRenderer:function(t){t.props,t.state;var e=n&&n.toISOString().slice(0,10),a=i&&i.toISOString().slice(0,10);return(0,O.jsxs)("div",{style:{cursor:"pointer"},children:[n&&i&&"".concat(e," ~ ").concat(a),(!n||!i)&&"All time"]})},dropdownRenderer:function(t){var e=t.props,n=t.state,i=t.methods,a=new RegExp(n.search,"i");return(0,O.jsxs)("div",{children:[(0,O.jsx)("div",{className:"date-range-items",children:e.options.filter((function(t){return a.test(t[e.searchBy]||t[e.labelField])})).map((function(t,n){return!e.keepSelectedInList&&i.isSelected(t)?null:(0,O.jsx)("div",{disabled:t.disabled,onClick:t.disabled?null:function(){return h(t)},className:t.id===l?"date-range-item selected":"date-range-item",children:(0,O.jsx)("div",{className:"date-range-item__label",children:t[e.labelField]})},n)}))}),(0,O.jsx)("div",{className:"date-range-custom",color:e.color,children:(0,O.jsx)(B.C0,{editableDateInputs:!0,onChange:p,moveRangeOnFirstSelection:!1,ranges:v,showDateDisplay:!1})})]})},labelField:"label",options:e,closeOnSelect:!0,closeOnScroll:!0,values:[l]})})}var M=n(98330),Z="filterBar___c4asA",$="link___ryLhx",E="page___b_L5o",H="main___RbyLk",G="header___uHW4R",W="title___HZUm4",Y="desc___Wbbjo",R=n(70215),z=n.n(R),J=n(12001),Q=n.n(J),X=n(61895),tt=["timestamp"],et=65,nt=Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}),it=Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:1}),at=Intl.NumberFormat("en-US",{minimumFractionDigits:3,maximumFractionDigits:3}),rt=Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}),ot=function(t,e){var n=t;if(!t)return"";n.constructor!==Date&&(n=new Date(1e3*n));var i=e&&e[0]&&e[0].payload&&e[0],a=Q()("%d.%m",n),r=i&&i.payload.all;return r?i&&"%"===i.unit?a:"".concat(a,", ").concat((0,X.dp)(r).display({prefix:"$"})):a},st=Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:1,maximumFractionDigits:1}),lt=Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}),ct="#f93333",ut="#E45571",dt="#70D785",mt="#FFD15B",vt="#5D75F6",xt="#8884FF",ft="#FFC500",ht=["#F1864A",vt,"#00bfea","#8884ff","#ab6100","#c90000","#7b7b7b","#6464ff","purple","darkgreen","#ff8d00",ct,"#ffaf01"],pt=function(t){var e=Math.abs(t);return e>=1e9?"".concat((t/1e9).toFixed(e<1e10?2:1),"B"):e>=1e6?"".concat((t/1e6).toFixed(e<1e7?2:1),"M"):e>=1e3?"".concat((t/1e3).toFixed(e<1e4?2:1),"K"):"".concat(t.toFixed(1))};function gt(t){var e=Math.abs(t);return e<10?lt:e<1e3?st:rt}var yt=function(t){return t.toFixed(2)+"%"};function jt(t){var e=Math.abs(t);return e<10?at:e<1e3?it:nt}var Dt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!!e.currency,i=!!e.compact;if(n&&!i)return gt(t).format(t);var a=i?pt(t):jt(t).format(t);return n&&!e.hiddenDollarSign?"$".concat(a):a},bt=function(t){return Dt(t)},Ft=function(t){return pt(t)},kt=function(t){return Dt(t,{currency:!0,compact:!0})},wt=function(t,e){var n=t;if(!n)return n;if(n.constructor!==Date&&!(n=new Date(1e3*Number(n))).getDate())return n;var i=Q()("%d.%m",n),a=e&&e[0];if(a&&"%"===a.unit)return i;var r=a&&a.payload.all;return n.constructor!==Date?r?"".concat(n,", total: ").concat(r):n:r?"".concat(i,", total: ").concat(r):i},Pt=function(t,e){return e&&"%"===e.unit?t.toFixed(2):(0,X.dp)(t).display({prefix:"$"})},_t=n(98687),It=n(94831),At=n(46888),Ct=n(90643),Nt=n(56880),St=n(86108),Lt=n(87226),Ut=n(9253),Kt=n(14195),Vt=n(3023),Bt=n(75358),Tt=n(14888),Ot=n(33558),qt=function(t){var e=t.title,n=t.children;return(0,O.jsxs)("div",{children:[e&&(0,O.jsx)("div",{children:e}),n]})},Mt=function(){},Zt=function(){};function $t(t){var e=t.data,n=t.controls,i=(0,d.useState)({isPercentsView:!1}),a=o()(i,2),r=a[0],s=a[1],l=(0,d.useMemo)((function(){if(e)return r.isPercentsView&&n.convertToPercents?n.convertToPercents(e):e}),[e,r.isPercentsView,n.convertToPercents]);return{viewState:r,togglePercentView:function(){s((function(t){return v()(v()({},t),{},{isPercentsView:!t.isPercentsView})}))},formattedData:l,itemsUnit:r.isPercentsView?"%":void 0,yaxisTickFormatter:r.isPercentsView?yt:kt,tooltipFormatter:r.isPercentsView?Mt:Zt}}var Et,Ht=function(t){var e,n=t.title,i=t.data,a=t.description,r=t.height,o=void 0===r?400:r,s=t.yaxisDataKey,l=void 0===s?"all":s,c=t.yaxisScale,u=t.truncateYThreshold,m=t.yaxisTickFormatter,x=t.yaxisDomain,f=void 0===x?[0,"auto"]:x,h=t.xaxisDataKey,g=void 0===h?"timestamp":h,y=t.xaxisTickFormatter,j=void 0===y?ot:y,D=t.tooltipFormatter,b=void 0===D?Pt:D,F=t.tooltipLabelFormatter,k=void 0===F?ot:F,w=t.items,P=t.type,_=void 0===P?"Bar":P,I=t.syncId,A=t.children,C=t.rightYaxisDataKey,N=t.controls,S=void 0===N?{}:N,L=$t({controls:S,data:i}),U=L.formattedData,K=L.yaxisTickFormatter,V=L.itemsUnit;e="Line"===_?_t.w:"Bar"===_?It.v:"Area"===_?At.T:Ct.c;var B=(0,d.useMemo)((function(){return"number"==typeof u&&i&&Math.max.apply(Math,p()(i.map((function(t){return t[l]}))))>u?[f[0],function(t){return u}]:null}),[i,u,null==f?void 0:f.join("-")]),T=(w||[]).map((function(t,e){var n={type:"monotone",dataKey:t.key,stackId:"a",name:t.name||t.key,fill:t.color||ht[e%ht.length],stroke:t.color||ht[e%ht.length],dot:t.dot||!1,key:"item-"+e,unit:t.unit||V,strokeWidth:t.strokeWidth,yAxisId:t.yAxisId};return"Line"===t.type||"Line"===_?(0,O.jsx)(Nt.x,v()(v()({},n),{},{isAnimationActive:!1})):"Area"===_?(0,O.jsx)(St.u,v()(v()({},n),{},{isAnimationActive:!1})):(0,O.jsx)(Lt.$,v()(v()({},n),{},{isAnimationActive:!1}))}));return(0,O.jsxs)(qt,{title:n,controls:S,children:[(0,O.jsx)(Ut.h,{width:"100%",height:o,children:d.createElement(e,{data:U,syncId:I},[(0,O.jsx)(Kt.q,{strokeDasharray:"10 10"},"a"),(0,O.jsx)(Vt.K,{dataKey:g,tickFormatter:j,minTickGap:30},"b"),(0,O.jsx)(Bt.B,{scale:c,domain:B||f,dataKey:l,tickFormatter:m||K},"c"),C?(0,O.jsx)(Bt.B,{dataKey:C,tickFormatter:m,orientation:"right",yAxisId:"right"},"c2"):null,(0,O.jsx)(Tt.u,{formatter:b,labelFormatter:k,contentStyle:{textAlign:"left"}},"d"),(0,O.jsx)(Ot.D,{},"e")].concat(p()(T),[A]))}),a&&(0,O.jsx)("div",{className:"chart-description",children:a})]})},Gt=function(t){var e=(t.traderData||{}).data;return(0,O.jsx)(Ht,{data:(e||[]).map((function(t){return v()({all:t.openInterest},t)})),yaxisDataKey:"all",items:[{key:"shortOpenInterest",name:"Short",color:ut},{key:"longOpenInterest",name:"Long",color:dt}],type:"Bar"})},Wt=n(43815),Yt=function(t){var e=t.traderData||{},n=e.data,i=e.stats,a=(0,M.Z)().t;return(0,O.jsxs)(qt,{children:[(0,O.jsx)(Ut.h,{width:"100%",height:400,children:(0,O.jsxs)(Ct.c,{data:n,syncId:"tradersId",children:[(0,O.jsx)(Kt.q,{strokeDasharray:"10 10"}),(0,O.jsx)(Vt.K,{dataKey:"timestamp",tickFormatter:ot,minTickGap:30}),(0,O.jsx)(Bt.B,{domain:[1.05*-(null==i?void 0:i.maxAbsCumulativePnl),1.05*(null==i?void 0:i.maxAbsCumulativePnl)],orientation:"right",yAxisId:"right",tickFormatter:kt,width:et,tick:{fill:ht[4]}}),(0,O.jsx)(Bt.B,{domain:[1.05*-(null==i?void 0:i.maxAbsPnl),1.05*(null==i?void 0:i.maxAbsPnl)],tickFormatter:kt,width:et}),(0,O.jsx)(Tt.u,{formatter:Pt,labelFormatter:ot,contentStyle:{textAlign:"left"}}),(0,O.jsx)(Ot.D,{}),(0,O.jsx)(Lt.$,{type:"monotone",fill:"#FFFFFF",dataKey:"pnl",name:"Net PnL",children:(n||[]).map((function(t,e){return(0,O.jsx)(Wt.b,{fill:t.pnl>0?dt:ut},"cell-".concat(e))}))}),(0,O.jsx)(Nt.x,{type:"monotone",strokeWidth:2,stroke:ft,dataKey:"currentPnlCumulative",name:"Cumulative PnL",yAxisId:"right"})]})}),(0,O.jsxs)("div",{className:"chart-description",children:[(0,O.jsx)("p",{children:a("Considers Settled (Closed) Positions")}),(0,O.jsxs)("p",{children:[a("Fees Are Not Factored Into PnL")," "]})]})]})},Rt=["viewState","togglePercentView","formattedData"],zt=function(t){return t},Jt=function(t){var e=t.syncId,n=t.traderData||{},i=n.data,a=n.stats,r={convertToPercents:zt},o=(0,M.Z)().t,s=$t({controls:r,data:i}),l=s.viewState,c=(s.togglePercentView,s.formattedData),u=z()(s,Rt);return(0,O.jsxs)(qt,{children:[(0,O.jsx)(Ut.h,{width:"100%",height:400,children:(0,O.jsxs)(Ct.c,{data:c,barGap:0,syncId:e,children:[(0,O.jsx)(Kt.q,{strokeDasharray:"10 10"}),(0,O.jsx)(Vt.K,{dataKey:"timestamp",tickFormatter:ot,minTickGap:30}),l.isPercentsView?(0,O.jsx)(Bt.B,{dataKey:"all",tickFormatter:u.yaxisTickFormatter,width:et}):(0,O.jsx)(Bt.B,{domain:[1.05*-(null==a?void 0:a.maxProfitLoss),1.05*(null==a?void 0:a.maxProfitLoss)],tickFormatter:u.yaxisTickFormatter,width:et}),(0,O.jsx)(Bt.B,{domain:[1.05*-(null==a?void 0:a.maxProfitLoss),1.05*(null==a?void 0:a.maxProfitLoss)],tickFormatter:u.yaxisTickFormatter,width:et}),(0,O.jsx)(Bt.B,{domain:[1.1*-a.maxCurrentCumulativeProfitLoss,1.1*a.maxCurrentCumulativeProfitLoss],orientation:"right",yAxisId:"right",tickFormatter:kt,width:et}),(0,O.jsx)(Tt.u,{formatter:Pt,labelFormatter:ot,contentStyle:{textAlign:"left"}}),(0,O.jsx)(Ot.D,{}),!l.isPercentsView&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(St.u,{yAxisId:"right",type:"monotone",fill:ut,stroke:0,dataKey:"currentLossCumulative",name:"Cumulative Loss",isAnimationActive:!1}),(0,O.jsx)(St.u,{yAxisId:"right",type:"monotone",stroke:0,fill:dt,dataKey:"currentProfitCumulative",name:"Cumulative Profit",isAnimationActive:!1})]}),l.isPercentsView?(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Lt.$,{unit:u.itemsUnit,type:"monotone",stackId:"b",fill:ut,dataKey:"totalLoss",name:"Loss",isAnimationActive:!1}),(0,O.jsx)(Lt.$,{unit:u.itemsUnit,type:"monotone",stackId:"b",fill:dt,dataKey:"totalProfit",name:"Profit",isAnimationActive:!1})]}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(Lt.$,{type:"monotone",fill:ut,dataKey:"totalLoss",name:"Loss",isAnimationActive:!1}),(0,O.jsx)(Lt.$,{type:"monotone",fill:dt,dataKey:"totalProfit",name:"Profit",isAnimationActive:!1})]})]})}),(0,O.jsxs)("div",{className:"chart-description",children:[(0,O.jsx)("p",{children:o("Considers Settled (Closed) Positions")}),(0,O.jsxs)("p",{children:[o("Fees Are Not Factored Into PnL")," "]})]})]})},Qt=function(t){var e=t.usersData;return(0,O.jsx)(Ht,{syncId:"syncGlp",data:e,yaxisDataKey:"all",rightYaxisDataKey:"cumulative",yaxisTickFormatter:Ft,tooltipFormatter:bt,tooltipLabelFormatter:wt,items:[{key:"trading",name:"Trading",color:mt},{key:"mintAndBurn",name:"Mint & Burn DLP",color:xt},{key:"cumulative",name:"Cumulative",type:"Line",strokeWidth:3,dot:!1,color:ft,dataKey:"cumulative",yAxisId:"right"}],type:"Composed"})},Xt=n(48268),te=n(94184),ee=n.n(te),ne="loading___aP5ZE",ie="card___zhLax",ae="price___S7iyd",re="neg___drPsm",oe="title___gB9uU",se="info___amemd",le="content___wzxup",ce=function(t){var e=t.title,n=t.price,i=t.content,a=t.loading,r=t.hiddenDollarSign,o=void 0!==r&&r;return(0,O.jsx)("div",{className:ie,children:a?(0,O.jsx)("div",{className:ne,children:(0,O.jsx)(l.Z,{spin:!0,rev:!0,style:{color:"#fff"}})}):(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)("div",{className:oe,children:e}),(0,O.jsxs)("div",{className:se,children:[(0,O.jsx)("div",{className:le,children:i}),n&&0!==Number(n)?(0,O.jsxs)("div",{className:ee()(ae,y()({},re,n<0)),children:[n>0?"+":"-",Dt(Math.abs(n),{currency:!0,compact:!0,hiddenDollarSign:o})]}):(0,O.jsx)("div",{className:ae,children:"+$0.00"})]})]})})},ue="card___JF7YH",de="loading___yv2zP",me="title___wE9Du",ve=function(t){var e=t.children,n=t.title,i=t.loading;return(0,O.jsxs)("div",{className:ue,children:[(0,O.jsx)("div",{className:me,children:n}),i&&(0,O.jsx)("div",{className:de,children:(0,O.jsx)(l.Z,{rev:!0,spin:!0,style:{color:"#fff",fontSize:"32px"}})}),e]})},xe=["viewState","togglePercentView","formattedData"],fe=function(t){return function(t,e){var n=e.totalKey,i=void 0===n?"all":n,a=e.ignoreKeys,r=void 0===a?[]:a,s=[].concat(p()(r),[i]);return t.map((function(t){var e,n=t.timestamp,a=z()(t,tt),r=t[i];"number"!=typeof r&&(r=Object.entries(a).reduce((function(t,e){var n=o()(e,2),i=n[0],a=n[1];return s.includes(i)||(t+=a),t}),0));var l=Object.entries(a).reduce((function(t,e){var n=o()(e,2),i=n[0],a=n[1];return s.includes(i)?t[i]=a:t[i]=a/r*100,t}),{});return v()(v()({},l),{},(e={},y()(e,i,100),y()(e,"timestamp",n),e))}))}(t,{ignoreKeys:["cumulative","movingAverageAll"],totalKey:"all"})},he=function(t){var e=t.data,n=$t({controls:{convertToPercents:fe},data:void 0===e?[]:e}),i=n.viewState,a=(n.togglePercentView,n.formattedData),r=z()(n,xe);return(0,O.jsx)(qt,{children:(0,O.jsx)(Ut.h,{width:"100%",height:480,children:(0,O.jsxs)(Ct.c,{data:a,syncId:"syncA",children:[(0,O.jsx)(Kt.q,{strokeDasharray:"10 10"}),(0,O.jsx)(Vt.K,{dataKey:"timestamp",tickFormatter:ot,minTickGap:30}),(0,O.jsx)(Bt.B,{dataKey:"all",interval:"preserveStartEnd",tickCount:i.isPercentsView?void 0:7,tickFormatter:r.yaxisTickFormatter,width:65}),(0,O.jsx)(Bt.B,{dataKey:"cumulative",orientation:"right",yAxisId:"right",tickFormatter:kt,width:65}),(0,O.jsx)(Tt.u,{formatter:Pt,labelFormatter:ot,contentStyle:{textAlign:"left"}}),(0,O.jsx)(Ot.D,{}),(0,O.jsx)(Lt.$,{unit:r.itemsUnit,isAnimationActive:!1,type:"monotone",dataKey:"trading",stackId:"a",name:"Trading",fill:mt}),(0,O.jsx)(Lt.$,{unit:r.itemsUnit,isAnimationActive:!1,type:"monotone",dataKey:"liquidation",stackId:"a",name:"Liquidation",fill:vt}),(0,O.jsx)(Lt.$,{unit:r.itemsUnit,isAnimationActive:!1,type:"monotone",dataKey:"mint",stackId:"a",name:"Buy BLP",fill:dt}),(0,O.jsx)(Lt.$,{unit:r.itemsUnit,isAnimationActive:!1,type:"monotone",dataKey:"burn",stackId:"a",name:"Sell BLP",fill:ut}),(0,O.jsx)(Nt.x,{isAnimationActive:!1,type:"monotone",strokeWidth:3,dot:!1,stroke:ft,dataKey:"cumulative",yAxisId:"right",name:"Cumulative"})]})})})},pe=function(t){var e=t.usersData;return(0,O.jsx)(Ht,{syncId:"syncGlp",data:e,truncateYThreshold:6500,rightYaxisDataKey:"cumulative",yaxisDataKey:"all",yaxisTickFormatter:Ft,tooltipFormatter:bt,tooltipLabelFormatter:wt,items:[{key:"newUser",name:"New User",color:vt},{key:"existingUser",name:"Existing User",color:xt},{key:"cumulativeNewUser",name:"Cumulative New Users",color:ft,type:"Line"}],type:"Composed"})},ge=n(34713),ye=n(95591),je=n(87797),De=["viewState","togglePercentView","formattedData"],be=function(t){return t},Fe=["BTC/USD","ETH/USD"],ke=function(t,e){var n=Fe.indexOf(t.name),i=Fe.indexOf(e.name);return n<i?-1:n>i?1:0},we=(0,d.memo)((function(t){var e=t.rangeTime,n=(0,ge.Ge)().library,i=(0,_.x)().chainId,a=L(e),r=(null==a?void 0:a.data)||[],o=(0,ye.ZP)("".concat(i),(function(){return(0,je.t)(i,n)})).data,l=$t({controls:{convertToPercents:be},data:r}),c=l.viewState,u=(l.togglePercentView,l.formattedData),d=z()(l,De);return(0,O.jsx)(ve,{loading:null==a?void 0:a.loading,title:(0,O.jsx)(s._H,{id:"Volume"}),children:(0,O.jsx)(qt,{children:(0,O.jsx)(Ut.h,{width:"100%",height:480,children:(0,O.jsxs)(Ct.c,{data:u,syncId:"syncA",children:[(0,O.jsx)(Kt.q,{strokeDasharray:"10 10"}),(0,O.jsx)(Vt.K,{dataKey:"timestamp",tickFormatter:ot,minTickGap:30}),(0,O.jsx)(Bt.B,{dataKey:"all",interval:"preserveStartEnd",tickCount:c.isPercentsView?void 0:7,tickFormatter:d.yaxisTickFormatter,width:65}),(0,O.jsx)(Bt.B,{dataKey:"cumulative",orientation:"right",yAxisId:"right",tickFormatter:kt,width:65}),(0,O.jsx)(Tt.u,{formatter:Pt,labelFormatter:ot,contentStyle:{textAlign:"left"}}),(0,O.jsx)(Ot.D,{}),(o||[]).sort(ke).map((function(t,e){return(0,O.jsx)(Lt.$,{unit:d.itemsUnit,isAnimationActive:!1,type:"monotone",dataKey:t.address.toUpperCase(),stackId:"a",name:t.name,fill:ht[e]})})),(0,O.jsx)(Lt.$,{unit:d.itemsUnit,isAnimationActive:!1,type:"monotone",dataKey:"buyAndSell",stackId:"a",name:"Buy&Sell BLP",fill:xt}),(0,O.jsx)(Nt.x,{isAnimationActive:!1,type:"monotone",dot:!1,strokeWidth:3,stroke:ft,dataKey:"cumulative",yAxisId:"right",name:"Cumulative"})]})})})})})),Pe="row___mVWhk",_e="col___xdcUD",Ie="colChart___vOXjt",Ae=(Et=u()().subtract(24,"hour").valueOf(),{from:parseInt("".concat(Et/1e3)),to:parseInt("".concat(Date.now()/1e3))}),Ce=function(t){var e=t.rangeTime,n=(0,M.Z)().t,i=function(t){var e=S('{\n    fees(where: {timestamp_gte: "'.concat(t.from,'", timestamp_lte:"').concat(t.to,'"}) {\n      id\n      open\n      close\n      execution\n      liquidation\n      funding\n      mint\n      timestamp\n      cumulative\n      burn\n    }\n  }\n  ')),n=o()(e,3),i=n[0],a=n[1],r=n[2],s=["open","close","execution","liquidation","funding","mint","burn","cumulative"],l=0;return{data:C(t,((null==i?void 0:i.fees)||[]).map((function(t){var e=U(s,t);l+=e.cumulative;var n=e.cumulative;return v()(v()({},e),{},{all:n,trading:e.open+e.close+e.execution+e.funding,cumulative:l})})),(function(t,e){return v()(v()({},t),{},{open:0,close:0,execution:0,liquidation:0,funding:0,trading:0,mint:0,burn:0,cumulative:e?e.cumulative:0,all:0})})),loading:a,error:r}}(e),a=function(){var t,e=S("{\n  summaries(where: {period: total }) {\n    fees\n    lpVolume\n    openInterest\n    trades\n    period\n    tradingVolume\n    uniqueUsers\n  }}"),n=o()(e,3),i=n[0],a=n[1],r=n[2];i&&(i.summaries||[]).length>0?(t=U(["fees","openInterest","tradingVolume"],i.summaries[0])).lpVolume=t.lpVolume/1e6:t={fees:0,openInterest:0,tradingVolume:0,lpVolume:0,uniqueUsers:0};return{data:t,loading:a,error:r}}(),r=function(t){var e,n,i,a,r,s,l,c,u,d,m=["totalProfit","totalLoss","pnlCumulative","longOpenInterest","openInterest","shortOpenInterest"],x=S('{\n     traders (where: { timestamp_gte: "'.concat(t.from,'", timestamp_lte:"').concat(t.to,'"}) {\n      longOpenInterest\n      openInterest\n      pnlCumulative\n      shortOpenInterest\n      timestamp\n      totalLoss\n      totalProfit\n    }\n  }\n  ')),f=o()(x,3),h=f[0],p=f[1],g=f[2],y=0,j=0,D=0,b=((null==h?void 0:h.traders)||[]).map((function(t){var e=U(m,t),n=e.totalProfit,i=e.totalLoss,a=i+n;return y+=a,D+=n,j-=Math.abs(i),v()(v()({},e),{},{currentLossCumulative:j,currentProfitCumulative:D,pnl:a,currentPnlCumulative:y})})),F=0,k=0,P=0;return b.length>0&&(e=null===(l=w.Z.maxBy(b,(function(t){return t.pnl})))||void 0===l?void 0:l.pnl,n=null===(c=w.Z.minBy(b,(function(t){return t.pnl})))||void 0===c?void 0:c.pnl,r=null===(u=w.Z.maxBy(b,(function(t){return t.currentPnlCumulative})))||void 0===u?void 0:u.currentPnlCumulative,i=null===(d=w.Z.minBy(b,(function(t){return t.currentPnlCumulative})))||void 0===d?void 0:d.currentPnlCumulative,a=w.Z.minBy(b,(function(t){return t.totalLoss})).totalLoss,s=w.Z.maxBy(b,(function(t){return t.totalProfit})).totalProfit,F=Math.max(s,-a),k=b[b.length-1].currentProfitCumulative,P=b[b.length-1].currentLossCumulative),{data:{data:C(t,b,(function(t,e){return v()(v()({},t),{},{longOpenInterest:0,openInterest:0,shortOpenInterest:0,currentLossCumulative:e?e.currentLossCumulative:0,currentProfitCumulative:e?e.currentProfitCumulative:0,pnl:0,currentPnlCumulative:e?e.currentPnlCumulative:0,pnlCumulative:e?e.pnlCumulative:0,totalLoss:e?e.totalLoss:0,totalProfit:e?e.totalProfit:0})})),stats:{maxPnl:e,maxLoss:a,maxProfit:s,maxProfitLoss:F,maxCurrentCumulativeProfitLoss:Math.max(k,-P),maxCurrentCumulativePnl:r,maxAbsPnl:Math.max(Math.abs(e||0),Math.abs(n||0)),maxAbsCumulativePnl:Math.max(Math.abs(r||0),Math.abs(i||0))}},loading:p,error:g}}(e),l=function(t){var e=t.from,n=t.to,i=S('{\n    summaries(where: {period: hourly, timestamp_gte: "'.concat(e,'", timestamp_lte:"').concat(n,'"}) {\n    fees\n    lpVolume\n    openInterest\n    period\n    tradingVolume\n    uniqueUsers\n  }}')),a=o()(i,3),r=a[0],s=a[1],l=a[2],c=["fees","openInterest","tradingVolume"];return null!=r&&r.summaries?{data:r.summaries.reduce((function(t,e){var n=U(c,e);return n.lpVolume=n.lpVolume/1e6,t.fees+=n.fees,t.openInterest+=n.openInterest,t.tradingVolume+=n.tradingVolume,t.lpVolume+=n.lpVolume,t.uniqueUsers+=n.uniqueUsers,t}),{fees:0,openInterest:0,tradingVolume:0,lpVolume:0,uniqueUsers:0}),loading:s,error:l}:{data:void 0,loading:s,error:l}}(Ae),c=function(t){var e=S('\n  {\n    activities(where: {  timestamp_gte: "'.concat(t.from,'", timestamp_lte:"').concat(t.to,'" }) {\n      openCount\n      closeCount\n      mintCount\n      burnCount\n      timestamp\n      newUser\n      userCount\n    }\n  }\n  ')),n=o()(e,3),i=n[0],a=n[1],r=n[2],s=0,l=0;return{data:C(t,((null==i?void 0:i.activities)||[]).map((function(t){var e=t.mintCount+t.burnCount,n=t.openCount+t.closeCount,i=n+e;s+=i;var a=t.userCount-t.newUser;return l+=t.newUser,v()(v()({},t),{},{all:i,mintAndBurn:e,trading:n,existingUser:a,cumulativeNewUser:l,cumulative:s})})),(function(t,e){return v()(v()({},t),{},{openCount:0,closeCount:0,mintCount:0,burnCount:0,newUser:0,userCount:0,all:0,mintAndBurn:0,trading:0,existingUser:e?e.existingUser:0,cumulativeNewUser:e?e.cumulativeNewUser:0,cumulative:e?e.cumulative:0})})),loading:a,error:r}}(e),u=null==a?void 0:a.data,d=null==l?void 0:l.data,m=null==r?void 0:r.data,x=(null==a?void 0:a.loading)||(null==l?void 0:l.loading);return(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:Pe,children:[(0,O.jsx)("div",{className:_e,children:(0,O.jsx)(ce,{loading:x,title:n("Volume"),content:(0,O.jsx)(Xt.Z,{value:null==u?void 0:u.tradingVolume,prefix:"$"}),price:null==d?void 0:d.tradingVolume})}),(0,O.jsx)("div",{className:_e,children:(0,O.jsx)(ce,{loading:x,title:n("Open Interest"),content:(0,O.jsx)(Xt.Z,{prefix:"$",value:null==u?void 0:u.openInterest}),price:null==d?void 0:d.openInterest})}),(0,O.jsx)("div",{className:_e,children:(0,O.jsx)(ce,{loading:x,title:n("Total Fees"),content:(0,O.jsx)(Xt.Z,{prefix:"$",value:null==u?void 0:u.fees}),price:null==d?void 0:d.fees})}),(0,O.jsx)("div",{className:_e,children:(0,O.jsx)(ce,{loading:x,title:n("BLP Pool"),content:(0,O.jsx)(Xt.Z,{prefix:"$",value:null==u?void 0:u.lpVolume}),price:null==d?void 0:d.lpVolume})}),(0,O.jsx)("div",{className:_e,children:(0,O.jsx)(ce,{hiddenDollarSign:!0,loading:x,title:n("Total Users"),content:(0,O.jsx)(Xt.Z,{value:null==u?void 0:u.uniqueUsers}),price:null==d?void 0:d.uniqueUsers})})]}),(0,O.jsxs)("div",{children:[(0,O.jsxs)("div",{className:Pe,children:[(0,O.jsx)("div",{className:Ie,children:(0,O.jsx)(we,{rangeTime:e})}),(0,O.jsx)("div",{className:Ie,children:(0,O.jsx)(ve,{loading:null==i?void 0:i.loading,title:(0,O.jsx)(s._H,{id:"Fees"}),children:(0,O.jsx)(he,{data:null==i?void 0:i.data})})})]}),(0,O.jsxs)("div",{className:Pe,children:[(0,O.jsx)("div",{className:Ie,children:(0,O.jsx)(ve,{loading:null==r?void 0:r.loading,title:(0,O.jsx)(s._H,{id:"Traders Net PnL"}),children:(0,O.jsx)(Yt,{traderData:m,syncId:"tradersId"})})}),(0,O.jsx)("div",{className:Ie,children:(0,O.jsx)(ve,{loading:null==r?void 0:r.loading,title:(0,O.jsx)(s._H,{id:"Traders Profit vs. Loss"}),children:(0,O.jsx)(Jt,{traderData:m,syncId:"tradersId"})})})]}),(0,O.jsxs)("div",{className:Pe,children:[(0,O.jsx)("div",{className:Ie,children:(0,O.jsx)(ve,{loading:null==r?void 0:r.loading,title:(0,O.jsx)(s._H,{id:"Open Interest"}),children:(0,O.jsx)(Gt,{traderData:m})})}),(0,O.jsx)("div",{className:Ie,children:(0,O.jsx)(ve,{loading:null==c?void 0:c.loading,title:(0,O.jsx)(s._H,{id:"Users Actions"}),children:(0,O.jsx)(Qt,{usersData:null==c?void 0:c.data})})})]}),(0,O.jsx)("div",{className:Pe,children:(0,O.jsx)("div",{className:Ie,children:(0,O.jsx)(ve,{loading:null==r?void 0:r.loading,title:(0,O.jsx)(s._H,{id:"Users"}),children:(0,O.jsx)(pe,{usersData:null==c?void 0:c.data})})})})]})]})},Ne=function(t){var e=(0,M.Z)().t,n=[{label:e("Last Month"),id:1,isDefault:!0},{label:e("Last 2 Months"),id:2},{label:e("Last 3 Months"),id:3}],i=(0,d.useState)({from:u()().subtract(30,"day").startOf("day").unix(),to:u()().endOf("day").unix()}),a=o()(i,2),r=a[0],c=a[1],m=(0,_.x)().chainId,v=function(t){var e=S("{\n    _meta {\n      block {\n        number\n      }\n    }\n  }"),n=o()(e,3),i=n[0],a=n[1],r=n[2],s=(0,d.useState)(),l=o()(s,2),c=l[0],u=l[1];return(0,d.useEffect)((function(){i&&A[t.toString()].getBlock(i._meta.block.number).then((function(t){u(t)})).catch((function(t){console.error(t)}))}),[i,u]),{block:c,loading:a,error:r}}(m),x=v.block,f=v.loading;return(0,O.jsx)(O.Fragment,{children:(0,O.jsxs)("div",{className:E,children:[(0,O.jsxs)("div",{className:G,children:[(0,O.jsx)("div",{className:W,children:e("Analytics")}),f||!x?(0,O.jsx)(l.Z,{spin:!0,rev:!0,style:{color:"#fff"}}):(0,O.jsx)("div",{className:Y,children:(0,O.jsx)(s._H,{id:"AnalyticsDesc",values:{time:u()(1e3*x.timestamp).fromNow(),block:(0,O.jsxs)("a",{className:$,href:(0,P.B8)(m,x.number),target:"_blank",children:[" ",x.number," "]})}})})]}),(0,O.jsxs)("div",{className:H,children:[(0,O.jsx)("div",{className:Z,children:(0,O.jsx)(q,{startDate:new Date(1e3*r.from),endDate:new Date(1e3*r.to),options:n,onChange:function(t){var e=o()(t,2),n=e[0],i=e[1];if(n&&i){var a=u()(n.getTime()).startOf("day").unix(),r=u()(i.getTime()).endOf("day").unix();c({from:a,to:r})}}})}),(0,O.jsx)(Ce,{rangeTime:r})]})]})})}}}]);